<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>My Profile</title>
    <script>
        $(document).ready(function () {
            $("#image").change(function () {
                readURL(this);
            });
        });
        $(document).ready(function () {
            $('#events .event-closer').click(function () {
                var eNumber = this.id;
                eNumber = parseInt(eNumber.substring(11))
                $.post(".",
                    {
                        submit: "Change",
                        type: "Event",
                        item: "delete",
                        itemId: eNumber
                    },
                    function (data, status) {
                        if (data == 200) {
                            $('#event' + eNumber).remove();
                        } else {
                            alert("We're unable to make your changes right now - try again in a few minutes.");
                        }
                    });
            });
        });
        $(document).ready(function () {
            $('#groups .group-closer').click(function () {
                var gNumber = this.id;
                gNumber = parseInt(gNumber.substring(11))
                $.post(".",
                    {
                        submit: "Change",
                        type: "Group",
                        item: "removeMe",
                        itemId: gNumber
                    },
                    function (data, status) {
                        if (data == 200) {
                            $('#group' + gNumber).remove();
                        } else {
                            alert("We're unable to make your changes right now - try again in a few minutes.");
                        }
                    });
            });
        });
        $(document).ready(function () {
            $('#userBirthdayMonthChange').change(populateDays);
            $('#submitPref').click(function () {
                (Promise.resolve())
                    .then(function () {
                        if ($('#userNameChange').val() == "") {
                            return Promise.resolve();
                        }
                        return $.post(".",
                            {
                                submit: "Change",
                                type: "User",
                                item: "name",
                                name: $('#userNameChange').val()
                            });
                    })
                    .then(function () {
                        if ($('#userEmailChange').val() == "") {
                            return Promise.resolve();
                        }
                        return $.post(".",
                            {
                                submit: "Change",
                                type: "User",
                                item: "email",
                                name: $('#userEmailChange').val()
                            });
                    })
                    .then(function () {
                        if ($('#userBirthdayDayChange').val() == null || $('#userBirthdayDayChange').val() == 0) {
                            return Promise.resolve();
                        } else {
                            $.post(".",
                                {
                                    submit: "Change",
                                    type: "User",
                                    item: "birthday",
                                    month: $('#userBirthdayMonthChange').val(),
                                    day: $('#userBirthdayDayChange').val()
                                });
                        }
                    })
                    .then(function () {
                        return $.post(".",
                            {
                                submit: "Change",
                                type: "User",
                                item: "bio",
                                bio: $('#userBioChange').val()
                            });
                    })
                    .then(function () {
                        return $.post(".",
                            {
                                submit: "Change",
                                type: "Preferences",
                                culture: $('#userCulture').val()
                            });
                    })
                    .then(function () {
                        location.reload(true);
                    });
                // chain promises, ending with the location.reload();
            });
        });
        $(document).ready(function () {
            $('#searchNewUser').click(function () {
                $.post(".",
                    {
                        submit: "Fetch",
                        type: "Email",
                        email: $('#newGroupAddUser').val()
                    },
                    function (data, status, xhr) {
                        if (status == "success") {
                            var dom = $.parseXML(xhr.responseText);
                            var id = parseInt(dom.getElementsByTagName("userId")[0].innerHTML);
                            // Iterate over lis, make sure not already added
                            var exists = false;
                            $("#newGroupMembers li").each(function (index) {
                                if ($(this).attr('data-user-id') == id) {
                                    // found
                                    exists = true;
                                    return false;
                                }
                            });
                            if (!exists) {
                                $('#userResult').removeClass("hidden");
                                $('#foundUser').text(dom.getElementsByTagName("userName")[0].innerHTML);
                                $('#foundUser').val(id);
                            } else {
                                $('#userResult').addClass("hidden");
                            }
                        } else {
                            $('#userResult').addClass("hidden");
                        }
                    });
            });
            $('#groupAddUser').click(function () {
                // Add to list of users (add email as value, name as text)
                // grab name
                var name = $('#foundUser').text();
                var id = $('#foundUser').val();
                $('#newGroupMembers').prepend("<li data-user-id=\"" + id + "\">" + name + " <a class=\"remove-user\"><i class=\"fa fa-times\"></i></a></li>");
                $('#userResult').addClass("hidden");
                $('#newGroupAddUser').val("");
            });
            $('#createNewGroupSubmit').click(function () {
                $.post(".",
                    {
                        submit: "Create",
                        type: "Group",
                        name: $('#newGroupName').val()
                    }, function (data, status) {
                        if (data != 0) {
                            // Success! loop over elems, sending email as additions:
                            $('#newGroupMembers li').each(function (index) {
                                // Post this group:
                                $.post(".", {
                                    submit: "Change",
                                    type: "Group",
                                    item: "addUser",
                                    itemId: data,
                                    userId: $(this).attr("data-user-id")
                                });
                            });
                            // close modal
                            $('#addGroup').modal('hide');
                        }
                    });
            });
        });
        $(document).ready(function () {
            $('.group-members').on('click', '.remove-user', function () {
                $(this.parentElement).remove();
            });
        });
        $(document).ready(function () {
            $('.group-name').click(function () {
                // get group information:
                // Get ID of this
                var id = $(this).attr('data-group-id');
                id = parseInt(id);
                $.post(".", {
                    submit: "Fetch",
                    type: "Group",
                    itemId: id
                },
                    function (data, status, xhr) {
                        if (status == "success") {
                            var data = xhr.responseText;
                            var dom = $.parseXML(data);
                            $('#editGroupName').attr('placeholder', dom.getElementsByTagName("name")[0].innerHTML);
                            $('#editGroupId').val(dom.getElementsByTagName("groupId")[0].innerHTML);
                            var members = dom.getElementsByTagName("members")[0].children;
                            $('#editGroupMembers li').each(function () {
                                $(this).remove();
                            });
                            $('#origGroupMembers li').each(function () {
                                $(this).remove();
                            });
                            for (var i = 0; i < members.length; i++) {
                                var id = members[i].children[0].innerHTML;
                                var name = members[i].children[1].innerHTML;
                                $('#editGroupMembers').prepend("<li data-user-id=\"" + id + "\">" + name + " <a class=\"remove-user\"><i class=\"fa fa-times\"></i></a></li>");
                                $('#origGroupMembers').prepend("<li data-user-id=\"" + id + "\"></li>");
                            }
                            $('#editGroup').modal('show');
                        }
                    });
            });
            $('#editSearchUser').click(function () {
                $.post(".",
                    {
                        submit: "Fetch",
                        type: "Email",
                        email: $('#editGroupAddUser').val()
                    },
                    function (data, status, xhr) {
                        if (status == "success") {
                            var dom = $.parseXML(xhr.responseText);
                            var id = parseInt(dom.getElementsByTagName("userId")[0].innerHTML);
                            // Iterate over lis, make sure not already added
                            var exists = false;
                            $("#editGroupMembers li").each(function (index) {
                                if ($(this).attr('data-user-id') == id) {
                                    // found
                                    exists = true;
                                    return false;
                                }
                            });
                            if (!exists) {
                                $('#editUserResult').removeClass("hidden");
                                $('#editFoundUser').text(dom.getElementsByTagName("userName")[0].innerHTML);
                                $('#editFoundUser').val(id);
                            } else {
                                $('#editUserResult').addClass("hidden");
                            }
                        } else {
                            $('#editUserResult').addClass("hidden");
                        }
                    });
            });
            $('#editGroupNewUser').click(function () {
                // Add to list of users (add id as value, name as text)
                // grab name
                var name = $('#editFoundUser').text();
                var id = $('#editFoundUser').val();
                $('#editGroupMembers').prepend("<li data-user-id=\"" + id + "\">" + name + " <a class=\"remove-user\"><i class=\"fa fa-times\"></i></a></li>");
                $('#editUserResult').addClass("hidden");
                $('#editGroupAddUser').val("");
            });
            $('#editGroupSubmit').click(function () {
                // loop through original group members. If any of them aren't found, REMOVE that member!
                $('#origGroupMembers li').each(function () {
                    // search in new list
                    var id = $(this).attr('data-user-id');
                    var isFound = false;
                    $('#editGroupMembers li').each(function () {
                        if ($(this).attr('data-user-id') === id) {
                            isFound = true;
                            return false;
                        }
                    });
                    if (!isFound) {
                        // Remove user
                        $.post(".",
                            {
                                submit: "Change",
                                type: "Group",
                                item: "removeUser",
                                itemId: $('#editGroupId').val(),
                                userID: $(this).attr('data-user-id')
                            });
                    }
                });
                // loop through edited group members. If any of them aren't found originally, ADD that member!
                $('#editGroupMembers li').each(function () {
                    var id = $(this).attr('data-user-id');
                    var isFound = false;
                    $('#origGroupMembers li').each(function () {
                        if ($(this).attr('data-user-id') === id) {
                            isFound = true;
                            return false;
                        }
                    });
                    if (!isFound) {
                        $.post(".",
                            {
                                submit: "Change",
                                type: "Group",
                                item: "addUser",
                                itemId: $('#editGroupId').val(),
                                userId: $(this).attr('data-user-id')
                            });
                    }
                });
                if ($('#editGroupName').val() !== "") {
                    $.post(".",
                        {
                            submit: "Change",
                            type: "Group",
                            item: "name",
                            itemId: $('#editGroupId').val(),
                            name: $('#editGroupName').val()
                        }, function () {
                            $('.group-name[data-group-id=' + $('#editGroupId').val() + ']').children().text($('#editGroupName').val());
                        });
                }
                $('#editGroup').modal('hide');
            });
        });
        $(document).ready(function () {
            $(window).keydown(function (event) {
                if (event.keyCode == 13) {
                    // Validate:
                    if (!$('#resetPassword').hasClass('in') || ($('#secondResetPass').val() && $('#secondResetPass').val() === $('#firstResetPass').val())) {
                        return true;
                    } else {
                        event.preventDefault();
                        return false;
                    }
                }
            });
            $('#resetSubmit').hide();
            $('#firstResetPass').keyup(function () {
                if ($('#secondResetPass').val() === $('#firstResetPass').val() && $('#secondResetPass').val()) {
                    // We are good to go!
                    $('#secondResetPass').parent().removeClass('has-error');
                    $('#secondResetPass').parent().addClass('has-success');
                    $('#firstResetPass').parent().removeClass('has-error');
                    $('#firstResetPass').parent().addClass('has-success');
                    $('#resetSubmit').show();
                } else {
                    // Passwords don't match; disable submit and warn
                    $('#secondResetPass').parent().removeClass('has-success');
                    $('#secondResetPass').parent().addClass('has-error');
                    $('#firstResetPass').parent().removeClass('has-success');
                    $('#firstResetPass').parent().addClass('has-error');
                    $('#resetSubmit').hide();
                }
            });
            $('#secondResetPass').keyup(function () {
                if ($('#secondResetPass').val() === $('#firstResetPass').val() && $('#secondResetPass').val()) {
                    // We are good to go!
                    $('#secondResetPass').parent().removeClass('has-error');
                    $('#secondResetPass').parent().addClass('has-success');
                    $('#firstResetPass').parent().removeClass('has-error');
                    $('#firstResetPass').parent().addClass('has-success');
                    $('#resetSubmit').show();
                } else {
                    // Passwords don't match; disable submit and warn
                    $('#secondResetPass').parent().removeClass('has-success');
                    $('#secondResetPass').parent().addClass('has-error');
                    $('#firstResetPass').parent().removeClass('has-success');
                    $('#firstResetPass').parent().addClass('has-error');
                    $('#resetSubmit').hide();
                }
            });
        });
        $(document).ready(function () {
            $('#uploadNewImg').click(function () {
                $.post(".", {
                    submit: "Image",
                    type: "user",
                    image: imgData.split(",")[1]
                });
            });
        });
        var imgData;
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    var loadTimer;
                    var imgObject = new Image();
                    imgObject.src = reader.result;
                    imgObject.onLoad = onImgLoaded();
                    function onImgLoaded() {
                        if (!loadTimer != null) clearTimeout(loadTimer);
                        if (!imgObject.complete) {
                            loadTimer = setTimeout(function () {
                                onImgLoaded();
                            }, 3);
                        } else {
                            onPreloadComplete();
                        }
                    }
                    function onPreloadComplete() {
                        var newImg;
                        var h = imgObject.naturalHeight;
                        var w = imgObject.naturalWidth;
                        if (w > h) {
                            newImg = getImagePortion(imgObject, h, h, (w / 2) - (h / 2), 0, 1);
                        } else {
                            newImg = getImagePortion(imgObject, w, w, 0, (h / 2) - (w / 2), 1);
                        }
                        // var newImg = getImagePortion(imgObject, imgObject.width, imgObject.height, 0, 0, 1);
                        $('#previewImage').attr('src', newImg);
                        $('#previewImage').removeClass("hidden");
                        $('#uploadNewImg').removeClass("hidden");
                        imgData = newImg;
                    }
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        function populateDays() {
            $('.days').remove();
            $("<option class=\"days\" selected value=\"0\">Select a Day</option>").appendTo($('#days'));
            for (var i = 1; i <= daysInMonth($('#userBirthdayMonthChange').val()); i++) {
                // Create a day:
                $("<option class=\"days\" value=\"" + i + "\">" + i + "</option>").appendTo($('#days'));
            }
        }
        function daysInMonth(month) {
            // Leap day
            if (month == 0) {
                return 0;
            }
            return new Date(2004, month, 0).getDate();
        }
        function getImagePortion(imgObj, newWidth, newHeight, startX, startY, ratio) {
            /* the parameters: - the image element - the new width - the new height - the x point we start taking pixels - the y point we start taking pixels - the ratio */
            //set up canvas for thumbnail
            var tnCanvas = document.createElement('canvas');
            var tnCanvasContext = tnCanvas.getContext('2d');
            tnCanvas.width = newWidth; tnCanvas.height = newHeight;

            /* use the sourceCanvas to duplicate the entire image. This step was crucial for iOS4 and under devices. Follow the link at the end of this post to see what happens when you don’t do this */
            var bufferCanvas = document.createElement('canvas');
            var bufferContext = bufferCanvas.getContext('2d');
            bufferCanvas.width = imgObj.width;
            bufferCanvas.height = imgObj.height;
            bufferContext.drawImage(imgObj, 0, 0);

            /* now we use the drawImage method to take the pixels from our bufferCanvas and draw them into our thumbnail canvas */
            tnCanvasContext.drawImage(bufferCanvas, startX, startY, newWidth * ratio, newHeight * ratio, 0, 0, newWidth, newHeight);
            return tnCanvas.toDataURL();
        }
    </script>
    <style>
        .input-group,
        .form-group,
        .spaced,
        .input {
            margin: 10px;
        }

        body {
            background-color: #CECECE;
            color: black;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        h2 {
            font-style: italic;
        }

        #userImage {
            height: 256px;
            width: 256px;
            display: inline;
            cursor: pointer;
        }

        #previewImage {
            height: 256px;
            width: 256px;
            display: inline;
        }

        .circle {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: inline-flex;
        }

        p {
            font-weight: 400;
            text-indent: each-line 20px;
            font-size: 22px;
        }

        .glyphicon {
            font-size: 75%;
        }

        table {
            width: 75%;
        }

        .btn {
            width: 100%;
        }

        .event-closer,
        .group-closer,
        .event-name,
        .group-name,
        #eventAdder,
        #groupAdder {
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div id="uploadImage" class="modal fade panel-success" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content panel-success">
                    <div class="modal-header panel-heading">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Upload new image</h4>
                    </div>
                    <div class="modal-body">
                        <form id="imgUploadForm" method="post" name="imgUploadForm" enctype="multipart/form-data">
                            <div class="row text-center">
                                <div class="form-group">
                                    <label class="btn btn-default btn-file">
                                        Browse <input id="image" name="image" accept="image/*" type="file" style="display: none;">
                                    </label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group text-center">
                                    <img id="previewImage" src="" class="img-circle img-responsive hidden" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group text-center">
                                    <button id="uploadNewImg" type="button" class="btn btn-primary hidden">
                                        Upload Picture
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="resetPassword" class="modal fade panel-danger" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content panel-danger">
                    <div class="modal-header panel-heading">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Reset your Password</h4>
                    </div>
                    <div class="modal-body">
                        <form id="resetForm" method="post">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                                <input name="password" type="password" class="form-control" id="firstResetPass" placeholder="New Password" />
                            </div>
                            <div class="input-group has-feedback">
                                <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                                <input type="password" class="form-control" id="secondResetPass" placeholder="Confirm New Password" />
                            </div>
                            <input class="hidden form-control" name="userID" type="hidden" value="" />
                            <button id="resetSubmit" type="submit" name="submit" form="resetForm" value="PasswordReset" class="btn btn-success">
                                Change Password
                            </button>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="changePreferences" class="modal fade panel-primary" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content panel-primary">
                    <div class="modal-header panel-heading">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Change Preferences</h4>
                    </div>
                    <div class="modal-body">
                        <form id="preferenceForm" method="post">
                            <h5>Edit any field to update your information</h5>
                            <div class="row form-group">
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                                    <input name="userName" id="userNameChange" class="form-control" placeholder="User Name" />
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="fa fa-at"></i></span>
                                    <input name="userEmail" id="userEmailChange" class="form-control" placeholder="Email Address" type="email" />
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col-md-6">
                                    <label for="birthdayMonth">Birthday (Month)</label>
                                    <select name="birthdayMonth" class="form-control" id="userBirthdayMonthChange">
                                        <optgroup label="Month">
                                            <option value="0">Select a Month</option>
                                            <option value="1">January</option>
                                            <option value="2">February</option>
                                            <option value="3">March</option>
                                            <option value="4">April</option>
                                            <option value="5">May</option>
                                            <option value="6">June</option>
                                            <option value="7">July</option>
                                            <option value="8">August</option>
                                            <option value="9">September</option>
                                            <option value="10">October</option>
                                            <option value="11">November</option>
                                            <option value="12">December</option>
                                        </optgroup>
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label for="birthdayDay">Birthday (Day)</label>
                                    <select name="birthdayDay" id="userBirthdayDayChange" class="form-control">
                                        <optgroup id="days" label="Day"></optgroup>
                                    </select>
                                </div>
                            </div>
                            <div class="row form-group">
                                <label for="userBio">Bio</label>
                                <textarea name="userBio" class="form-control" rows="5" id="userBioChange"></textarea>
                            </div>
                            <div class="row form-group">
                                <h2>Theme: <span id="theme" class="circle" style=""></span></h2>
                            </div>
                            <div class="row form-group">
                                <label for="culture">Language</label>
                                <div class="input-group">
                                    <span class="input-group-addon"><i class="glyphicon glyphicon-globe"></i></span>
                                    <select name="culture" id="userCulture" class="form-control"></select>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12">
                                    <button id="submitPref" type="button" class="btn btn-success" name="submit" value="Preferences">
                                        <span class="glyphicon glyphicon-check"></span> Confirm
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="addEvent" class="modal fade panel-info" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content panel-info">
                    <div class="modal-header panel-heading">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Add New Event</h4>
                    </div>
                    <div class="modal-body">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="addGroup" class="modal fade panel-info" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content panel-info">
                    <div class="modal-header panel-heading">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Add New Group</h4>
                    </div>
                    <div class="modal-body">
                        <div class="row form-group">
                            <label for="groupName">Group Name</label>
                            <input name="groupName" id="newGroupName" class="form-control" placeholder="Group Name" />
                        </div>
                        <div class="row form-group">
                            <div class="input-group add-on">
                                <input class="form-control" placeholder="Search" name="addUser" id="newGroupAddUser" type="email" />
                                <div class="input-group-btn">
                                    <button id="searchNewUser" class="btn btn-default" type="button"><i class="glyphicon glyphicon-search"></i></button>
                                </div>
                            </div>
                        </div>
                        <div id="userResult" class="row hidden form-group">
                            <div class="col-xs-6">
                                <p id="foundUser"></p>
                            </div>
                            <div class="col-xs-4">
                                <button id="groupAddUser" name="submit" value="addUser" role="button" class="btn btn-success" type="button">
                                    Add User
                                </button>
                            </div>
                        </div>
                        <div class="row form-group">
                            <h2>Members:</h2>
                            <ul id="newGroupMembers" class="group-members"></ul>
                        </div>
                        <div class="row form-group">
                            <button id="createNewGroupSubmit" name="submit" value="newGroup" role="button" class="btn btn-success">
                                Create new Group
                            </button>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="editEvent" class="modal fade panel-success" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content panel-success">
                    <div class="modal-header panel-heading">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 id="editEventTitle" class="modal-title">Edit Event</h4>
                    </div>
                    <div class="modal-body">

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="editGroup" class="modal fade panel-success" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content panel-success">
                    <div class="modal-header panel-heading">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 id="editGroupTitle" class="modal-title">Edit Group</h4>
                    </div>
                    <div class="modal-body">
                        <div class="row form-group">
                            <label for="groupName">Group Name</label>
                            <input name="groupName" id="editGroupName" class="form-control" placeholder="Group Name" />
                            <input type="hidden" id="editGroupId" />
                        </div>
                        <div class="row form-group">
                            <div class="input-group add-on">
                                <input class="form-control" placeholder="Search" name="addUser" id="editGroupAddUser" type="email" />
                                <div class="input-group-btn">
                                    <button id="editSearchUser" class="btn btn-default" type="button"><i class="glyphicon glyphicon-search"></i></button>
                                </div>
                            </div>
                        </div>
                        <div id="editUserResult" class="row hidden form-group">
                            <div class="col-xs-6">
                                <p id="editFoundUser"></p>
                            </div>
                            <div class="col-xs-4">
                                <button id="editGroupNewUser" name="submit" value="addUser" role="button" class="btn btn-success" type="button">
                                    Add User
                                </button>
                            </div>
                        </div>
                        <div class="row form-group">
                            <h2>Members:</h2>
                            <ul id="editGroupMembers" class="group-members"></ul>
                            <ul id="origGroupMembers" class="hidden"></ul>
                        </div>
                        <div class="row form-group">
                            <button id="editGroupSubmit" role="button" class="btn btn-success">
                                Save Changes
                            </button>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4 text-center">
                <!-- User Image -->
                <img id="userImage" type="button" data-tooltip="tooltip" data-placement="bottom auto" title="Click to select new image" data-toggle="modal" href="#uploadImage" class="img-circle img-responsive" src="resources/images/users/default.png" />
                <h1 id="userName" class="form-control-static"></h1>
                <!-- User Name -->
                <div class="row">
                    <div class="col-xs-6">
                        <button class="btn btn-lg btn-danger" type="button" id="resetPassword" data-toggle="modal" data-target="#resetPassword">
                            <div class="hidden-md hidden-sm hidden-xs">Change Password </div><span class="glyphicon glyphicon-lock"></span>
                        </button>
                    </div>
                    <div class="col-xs-6">
                        <button class="btn btn-lg btn-primary" type="button" id="changePreferences" data-toggle="modal" data-target="#changePreferences">
                            <div class="hidden-md hidden-sm hidden-xs">Preferences </div><span class="glyphicon glyphicon-cog"></span>
                        </button>
                    </div>
                </div>
                <h3 id="timeMember"></h3>
            </div>
            <div class="col-sm-5">
                <!-- User Information -->
                <h3 id="email"></h3>
                <h3 id="birthday"></h3>
                <h3>Bio: </h3>
                <p id="bio"></p>
            </div>
            <div class="col-sm-3 hidden-xs">
                <!-- Add Side Navigation Bar (From Dashboard) -->
                <div id="navigator" class="panel">
                    <div class="text-center panel-heading">Quick Links</div>
                    <div class="panel-body">
                        <ul class="nav nav-pills nav-stacked">
                            <li><a href=".?dest=dashboard">Dashboard</a></li>
                            <li><a href=".?dest=myList">My List</a></li>
                            <li><a href=".?dest=myGroups">My Groups</a></li>
                            <li class="active"><a href=".?dest=profile">My Account</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4">
                <h1 class="text-left">Events</h1>
                <table id="events"></table>
            </div>
            <div class="col-sm-4">
                <h1 class="text-left">Groups</h1>
                <table id="groups"></table>
            </div>
        </div>
    </div>
</body>
</html>