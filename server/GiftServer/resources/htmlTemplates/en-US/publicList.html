<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>My Gift List</title>
    <script>
        jQuery(document).ready(function ($) {
            $(".clickable-row").click(function () {
                window.location = $(this).data("href");
            });
            $('.star-rating').rating({
                displayOnly: true,
                step: 0.5,
                size: 'xs',
                containerClass: 'minimized'
            });
            $('#viewGiftRating').rating({
                step: 0.5,
                size: 'xs',
                containerClass: 'minimized'
            });

            $('.gift-row').click(function () {
                // Get ID of this
                var id = this.id;
                id = parseInt(id);
                $.post(".", {
                    submit: "Fetch",
                    type: "Gift",
                    itemId: id
                },
                function (data, status, xhr) {
                    if (status == "success") {
                        var data = xhr.responseText;
                        var dom = $.parseXML(data);
                        $('#viewGiftImage').attr("src", dom.getElementsByTagName("image")[0].innerHTML);
                        $('#viewGiftRating').rating("update", parseFloat(dom.getElementsByTagName("rating")[0].innerHTML));
                        $('#viewGiftId').val(dom.getElementsByTagName("giftId")[0].innerHTML);
                        $("#viewGiftName").text(dom.getElementsByTagName("name")[0].innerHTML);
                        $('#viewGiftDescription').text(dom.getElementsByTagName("description")[0].innerHTML);
                        $('#viewGiftUrl').text(dom.getElementsByTagName("url")[0].innerHTML);
                        $('#viewGiftUrl').attr('href', (dom.getElementsByTagName("url")[0].innerHTML));
                        $('#viewGiftStores').text(dom.getElementsByTagName("stores")[0].innerHTML);
                        $('#viewGiftCost').text(dom.getElementsByTagName("cost")[0].innerHTML);
                        $('#viewGiftQuantity').text(dom.getElementsByTagName("quantity")[0].innerHTML);
                        $('#viewGiftColor').css("background-color", dom.getElementsByTagName("color")[0].innerHTML);
                        $('#viewGiftColorText').text(dom.getElementsByTagName("colorText")[0].innerHTML);
                        $('#viewGiftSize').text(dom.getElementsByTagName("size")[0].innerHTML);
                        $('#viewGiftCategory').text(dom.getElementsByTagName("category")[0].innerHTML);
                        $('#viewGiftItem').modal();
                    }
                });
            });

            function rgb2hex(rgb) {
                rgb = rgb.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);
                return (rgb && rgb.length === 4) ? "#" +
                    ("0" + parseInt(rgb[1], 10).toString(16)).slice(-2) +
                    ("0" + parseInt(rgb[2], 10).toString(16)).slice(-2) +
                    ("0" + parseInt(rgb[3], 10).toString(16)).slice(-2) : '';
            }
        });
    </script>
    <style>
        table {
            max-width: 75%;
        }
        tr {
            cursor: pointer;
            background-color: white;
        }
        th {
            text-align: center;
        }
        body {
            background-color: #CECECE;
            color: black;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        img {
            max-height: 128px;
            max-width: 128px;
        }
        #addNew {
            margin: 10px;
        }
        .parent {
            display: flex;
            flex-flow: row;
        }
        .child {
            margin: auto;
        }
        .circle {
            width: 25px;
            height: 25px;
            border-width: 2px;
            border-style: solid;
            border-radius: 50%;
            border-color: black;
            display: inline-flex;
        }
        .description {
            font-size: 12px;
            font-weight: 100 !important;
        }
        .star-rating {
            font-size: 10px;
        }
        .gift-row p {
            font-size: 20px;
            font-weight: bold;
            line-height: 1.5em;
            height: 6em;
            overflow: hidden;
        }
        .minimized {
            font-size: 75%;
            text-align: left;
        }
        #editGiftImage {
            cursor: pointer;
        }
        #previewImage {
            height: 256px;
            width: 256px;
            display: inline;
        }
        #ratingHeader {
            width: 8%
        }
        #quantHeader {
            width: 8%;
        }
        #costHeader {
            width: 8%;
        }
        #descHeader {
            width: 32%;
        }
        
    </style>
</head>
<body>
    <!-- Format: id, name, class, type, placeholder, tooltip-->
    <div class="container-fluid">
        <div id="viewGiftItem" class="modal fade panel-primary" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content panel-primary">
                    <div class="modal-header panel-heading">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 id="editTitle" class="modal-title">View Gift Information</h4>
                    </div>
                    <div class="modal-body">
                        <div class="container-fluid">
                            <div class="row">
                                <input id="viewGiftId" name="itemId" class="form-control" type="hidden" value="" />
                                <div class="col-md-12">
                                    <div class="row parent">
                                        <img id="viewGiftImage" class="text-center img-thumbnail img-responsive child" src="resources/images/gifts/default.png" />
                                    </div>
                                    <div class="row parent">
                                        <div class="child">
                                            <input id="viewGiftRating" name="giftRating" data-show-caption="false" value="0.0" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 text-right">
                                    <label>Name:</label>
                                </div>
                                <div class="col-md-6 text-left">
                                    <p id="viewGiftName"></p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 text-right">
                                    <label>Description:</label>
                                </div>
                                <div class="col-md-6 text-left">
                                    <p id="viewGiftDescription"></p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 text-right">
                                    <label>URL:</label>
                                </div>
                                <div class="col-md-6 text-left">
                                    <a id="viewGiftUrl"></a>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 text-right">
                                    <label>Stores:</label>
                                </div>
                                <div class="col-md-6 text-left">
                                    <p id="viewGiftStores"></p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 text-right">
                                    <label>Category:</label>
                                </div>
                                <div class="col-md-6 text-left">
                                    <p id="viewGiftCategory"></p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 text-right">
                                    <label>Cost:</label>
                                </div>
                                <div class="col-md-6 text-left">
                                    <p id="viewGiftCost"></p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 text-right">
                                    <label>Quantity:</label>
                                </div>
                                <div class="col-md-6 text-left">
                                    <p id="viewGiftQuantity"></p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group parent">
                                    <div class="col-md-6 text-right">
                                        <label>Color:</label>
                                    </div>
                                    <div class="col-md-1 text-left">
                                        <span id="viewGiftColor" class="circle child"></span>
                                    </div>
                                    <div class="col-md-5">
                                        <p id="viewGiftColorText"></p>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 text-right">
                                    <label>Size:</label>
                                </div>
                                <div class="col-md-6 text-left">
                                    <p id="viewGiftSize"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer panel-footer panel-primary">
                        <div class="form-group">
                            <button id="editGiftCancel" name="cancel" class="btn btn-danger" type="button" data-dismiss="modal">
                                <p id="cancelLabel">Cancel</p>
                            </button>
                            <button id="editGiftSubmit" name="submit" class="btn btn-success" type="button" value="Change">
                                <p id="applyLabel">Apply Changes</p>
                            </button>
                        </div>
                    </div>
                </div> 
            </div>
        </div>
        <div class="row text-left">
            <h1 id="userName"></h1>
        </div>
        <table id="fullList" class="table hidden-xs table-hover table-responsive">
            <thead>
                <tr>
                    <th>
                        <p>Picture</p>
                    </th>
                    <th id="ratingHeader">
                        <p>Rating</p>
                    </th>
                    <th>
                        <p>Name</p>
                    </th>
                    <th id="quantHeader">
                        <p>Quantity</p>
                    </th>
                    <th id="costHeader">
                        <p>Cost</p>
                    </th>
                    <th id="descHeader">
                        <p>Description</p>
                    </th>
                </tr>
            </thead>
            <tbody id="giftHolder">

            </tbody>
        </table>
        <table id="minList" class="table visible-xs table-hover table-responsive">
            <thead>
                <tr>
                    <th>
                        <p id="smallPicHeader">Picture</p>
                    </th>
                    <th>
                        <p id="smallNameHeader">Name</p>
                    </th>
                </tr>
            </thead>
            <tbody id="xsGiftHolder">
            </tbody>
        </table>
    </div>
</body>
</html>