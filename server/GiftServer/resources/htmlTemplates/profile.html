<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>My Profile</title>
    <script>
        $(document).ready(function () {
            $("#image").change(function () {
                readURL(this);
            });

        });
        $(document).ready(function () {
            $(window).keydown(function (event) {
                if (event.keyCode == 13) {
                    // Validate:
                    if (!$('#resetPassword').hasClass('in') || ($('#secondResetPass').val() && $('#secondResetPass').val() === $('#firstResetPass').val())) {
                        return true;
                    } else {
                        event.preventDefault();
                        return false;
                    }
                }
            });
            $('#resetSubmit').hide();
            $('#firstResetPass').keyup(function () {
                if ($('#secondResetPass').val() === $('#firstResetPass').val() && $('#secondResetPass').val()) {
                    // We are good to go!
                    $('#secondResetPass').parent().removeClass('has-error');
                    $('#secondResetPass').parent().addClass('has-success');
                    $('#firstResetPass').parent().removeClass('has-error');
                    $('#firstResetPass').parent().addClass('has-success');
                    $('#resetSubmit').show();
                } else {
                    // Passwords don't match; disable submit and warn
                    $('#secondResetPass').parent().removeClass('has-success');
                    $('#secondResetPass').parent().addClass('has-error');
                    $('#firstResetPass').parent().removeClass('has-success');
                    $('#firstResetPass').parent().addClass('has-error');
                    $('#resetSubmit').hide();
                }
            });
            $('#secondResetPass').keyup(function () {
                if ($('#secondResetPass').val() === $('#firstResetPass').val() && $('#secondResetPass').val()) {
                    // We are good to go!
                    $('#secondResetPass').parent().removeClass('has-error');
                    $('#secondResetPass').parent().addClass('has-success');
                    $('#firstResetPass').parent().removeClass('has-error');
                    $('#firstResetPass').parent().addClass('has-success');
                    $('#resetSubmit').show();
                } else {
                    // Passwords don't match; disable submit and warn
                    $('#secondResetPass').parent().removeClass('has-success');
                    $('#secondResetPass').parent().addClass('has-error');
                    $('#firstResetPass').parent().removeClass('has-success');
                    $('#firstResetPass').parent().addClass('has-error');
                    $('#resetSubmit').hide();
                }
            });
        });
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#previewImage').attr('src', e.target.result);
                    $('#previewImage').removeClass("hidden");
                    $('#submitImg').removeClass("hidden");
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>
    <style>
        .input-group,
        .form-group,
        .spaced {
            margin: 10px;
        }
        body {
            background-color: #CECECE;
            color: black;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        h2 {
            font-style: italic;
        }
        #userImage {
            height: 256px;
            width: 256px;
            display: inline;
            cursor: pointer;
        }
        #previewImage {
            height: 256px;
            width: 256px;
            display: inline;
        }
        .circle {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: inline-flex;
        }
        p {
            font-weight: 200;
            text-indent: each-line 20px;
            font-size: 22px;
        }
        .glyphicon {
            font-size: 75%;
        }
        table {
            width: 75%;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div id="uploadImage" class="modal fade panel-success" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content panel-success">
                    <div class="modal-header panel-heading">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Upload new image</h4>
                    </div>
                    <div class="modal-body">
                        <form id="imgUploadForm" method="post" name="imgUploadForm" enctype="multipart/form-data">
                            <div class="row text-center">
                                <div class="form-group">
                                    <label class="btn btn-default btn-file">
                                        Browse <input id="image" name="image" accept="image/*" type="file" style="display: none;">
                                    </label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group text-center">
                                    <img id="previewImage" src="" class="img-circle img-responsive hidden" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group text-center">
                                    <button id="submitImg" form="imgUploadForm" type="submit" class="btn btn-primary hidden" name="submit" value="Profile">
                                        Upload Picture
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="resetPassword" class="modal fade panel-danger" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content panel-danger">
                    <div class="modal-header panel-heading">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Reset your Password</h4>
                    </div>
                    <div class="modal-body">
                        <form id="resetForm" method="post">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                                <input name="password" type="password" class="form-control" id="firstResetPass" placeholder="Password" />
                            </div>
                            <div class="input-group has-feedback">
                                <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                                <input type="password" class="form-control" id="secondResetPass" placeholder="Confirm Password" />
                            </div>
                            <input class="hidden form-control" name="userID" type="hidden" value="" />
                            <button id="resetSubmit" type="submit" name="submit" form="resetForm" value="PasswordReset" class="btn btn-success">
                                Change Password
                            </button>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4 text-center">
                <!-- User Image -->
                <img id="userImage" type="button" data-tooltip="tooltip" data-placement="bottom auto" title="Click to select new image" data-toggle="modal" href="#uploadImage" class="img-circle img-responsive" src="resources/images/users/default.png" />
                <h1 id="userName"></h1>
                <button class="btn btn-lg btn-danger" type="button" id="resetPassword" data-toggle="modal" data-target="#resetPassword">Change Password</button>
                <h3 id="timeMember"></h3>
            </div>
            <div class="col-sm-5">
                <!-- User Information -->
                <h2 id="email"></h2>
                <h2 id="birthday"></h2>
                <h2>Theme: <span id="theme" class="circle" style=""></span></h2>
                <!-- Theme button -->
                <h2>Bio: </h2>
                <p id="bio"></p>
            </div>
            <div class="col-sm-3 hidden-xs">
                <!-- Add Side Navigation Bar (From Dashboard) -->
                <div id="navigator" class="panel">
                    <div class="text-center panel-heading">Quick Links</div>
                    <div class="panel-body">
                        <ul class="nav nav-pills nav-stacked">
                            <li><a href=".?dest=dashboard">Dashboard</a></li>
                            <li><a href=".?dest=myList">My List</a></li>
                            <li><a href=".?dest=myGroups">My Groups</a></li>
                            <li class="active"><a href=".?dest=profile">My Account</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-4">
                <h1 class="text-left">Events</h1>
                <table id="events">
                </table>
            </div>
            <div class="col-sm-4">
                <h1 class="text-left">Groups</h1>
                <table id="groups">
                    
                </table>
            </div>
        </div>
    </div>
</body>
</html>